<nav class="app-navigation">
    {% set newContacts = app_membershipService.byStatus('Nouvelle') | length + app_partnershipService.byStatus('Nouvelle') | length + app_messageService.byStatus('Nouveau') | length %}
    {% set waitingContacts = app_membershipService.byStatus('En attente') | length + app_partnershipService.byStatus('En attente') | length + app_messageService.byStatus('En attente') | length %}
    <div class="app-dropdownmenu">
        <a href="#" onclick="return false;"
           class="{% if newContacts > 0 %}bg-danger{% elseif waitingContacts > 0 %}bg-warning{% endif %}">
            {{ ux_icon('bi:envelope-fill', {'class': 'app-icon medium'}) }}
            Contacts
        </a>

        <div class="dropdown-content">
            <div class="dropdown-item">
                <img src="{{ asset('img/account/navigation.webp') }}" alt="Contacts"/>
            </div>
            <div class="dropdown-item">
                <div class="app-grid three">
                    <div class="grid-item">
                        <strong>Adhésions</strong>
                        <a href="{{ path('app_back_office_contacts_membership_home') }}?etat=nouvelle"
                           class="{% if app.request.get('_route') == 'app_back_office_contacts_membership_home' and app.request.query.get('etat') == 'nouvelle' %}active{% endif %} {% if app_membershipService.byStatus('Nouvelle') | length > 0 %}text-danger{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            {{ app_membershipService.byStatus('Nouvelle') | length }}
                            Nouvelle{{ app_membershipService.byStatus('Nouvelle') | length > 1 ? 's' : '' }}
                            demande{{ app_membershipService.byStatus('Nouvelle') | length > 1 ? 's' : '' }}
                        </a>
                        <a href="{{ path('app_back_office_contacts_membership_home') }}?etat=attente"
                           class="{% if app.request.get('_route') == 'app_back_office_contacts_membership_home' and app.request.query.get('etat') == 'attente' %}active{% endif %} {% if app_membershipService.byStatus('Attente') | length > 0 %}text-warning{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            {{ app_membershipService.byStatus('Attente') | length }}
                            Demande{{ app_membershipService.byStatus('Attente') | length > 1 ? 's' : '' }}
                            en attente
                        </a>
                        <a href="{{ path('app_back_office_contacts_membership_home') }}?etat=archive"
                           class="{% if app.request.get('_route') == 'app_back_office_contacts_membership_home' and app.request.query.get('etat') == 'archive' %}active{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            Demandes archivées
                        </a>
                    </div>
                    <div class="grid-item">
                        <strong>Partenariats</strong>
                        <a href="{{ path('app_back_office_contacts_partnership_home') }}?etat=nouvelle"
                           class="{% if app.request.get('_route') == 'app_back_office_contacts_partnership_home' and app.request.query.get('etat') == 'nouvelle' %}active{% endif %} {% if app_partnershipService.byStatus('Nouvelle') | length > 0 %}text-danger{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            {{ app_partnershipService.byStatus('Nouvelle') | length }}
                            Nouvelle{{ app_partnershipService.byStatus('Nouvelle') | length > 1 ? 's' : '' }}
                            proposition{{ app_partnershipService.byStatus('Nouvelle') | length > 1 ? 's' : '' }}
                        </a>
                        <a href="{{ path('app_back_office_contacts_partnership_home') }}?etat=attente"
                           class="{% if app.request.get('_route') == 'app_back_office_contacts_partnership_home' and app.request.query.get('etat') == 'attente' %}active{% endif %} {% if app_partnershipService.byStatus('Attente') | length > 0 %}text-warning{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            {{ app_partnershipService.byStatus('Attente') | length }}
                            Proposition{{ app_partnershipService.byStatus('Attente') | length > 1 ? 's' : '' }}
                            en attente
                        </a>
                        <a href="{{ path('app_back_office_contacts_partnership_home') }}?etat=archive"
                           class="{% if app.request.get('_route') == 'app_back_office_contacts_partnership_home' and app.request.query.get('etat') == 'archive' %}active{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            Propositions archivées
                        </a>
                    </div>
                    <div class="grid-item">
                        <strong>Messages</strong>
                        <a href="#"
                           class="{% if app.request.get('_route') == 'app_back_office_message_home' %}active{% endif %} {% if app_messageService.byStatus('Nouveau') | length > 0 %}text-danger{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            {{ app_messageService.byStatus('Nouveau') | length }}
                            Nouveau{{ app_messageService.byStatus('Nouveau') | length > 1 ? 'x' : '' }}
                            message{{ app_messageService.byStatus('Nouveau') | length > 1 ? 's' : '' }}
                        </a>
                        <a href="#"
                           class="{% if app.request.get('_route') == 'app_back_office_message_wait' %}active{% endif %} {% if app_messageService.byStatus('Attente') | length > 0 %}text-warning{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            {{ app_messageService.byStatus('Attente') | length }}
                            Message{{ app_messageService.byStatus('Attente') | length > 1 ? 's' : '' }}
                            en attente
                        </a>
                        <a href="#"
                           class="{% if app.request.get('_route') == 'app_back_office_message_archive' %}active{% endif %}">
                            <img src="{{ asset('img/logo_small.png') }}" class="bullet" alt="BSS"/>
                            Messages archivés
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>
